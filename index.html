<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RmanPtcSop: RmanPtcSop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>RmanPtcSop</h1><h2><a class="anchor" id="Overview">
Overview</a></h2>
<p>The RmanPtcSop project is a Houdini geometry operator (SOP) for loading and displaying RenderMan point clouds. It is based on the open source <a href="http://dneg.github.com/dnPtcViewerNode">dnPtcViewerNode</a> project from Double Negative Visual Effects.</p>
<div align="center">
<img src="rmanPtc_sop.png" alt="rmanPtc_sop.png"/>
</div>
<p>Features of the <b>rmanPtc</b> SOP include: </p>
<ul>
<li>
Independent control for limiting the number of points loaded and displayed. </li>
<li>
Geometry output for all point attributes in the cloud. </li>
<li>
OpenGL display preview for attributes as point or disk primitives. </li>
<li>
Ability to cull points based on a reference bounding box. </li>
</ul>
<p>The code is freely available from <a href="http://github.com/danbethell/rmanptcsop">http://github.com/danbethell/rmanptcsop</a> and is released under the New BSD license. See <a class="el" href="COPYING.html">COPYING</a> for more details.</p>
<p>For information on building and installing the Houdini plugin see the <a class="el" href="BUILDING.html">Building &amp; Installation</a> page.</p>
<div align="center">
<img src="rmanPtc_grab1.jpg" alt="rmanPtc_grab1.jpg"/>
</div>
<p><b>RenderMan® is a registered trademark of Pixar.<br/>
 Houdini® is a registered trademark of Side Effects Software.</b></p>
<h2><a class="anchor" id="loading">
Loading Point Clouds</a></h2>
<p>Point clouds can be very large and loading is the most expensive (i.e. slowest) part of the process so it's a good idea to avoid reloading of the point cloud unless necessary.</p>
<p>The point cloud is reloaded when any of these occurs: </p>
<ul>
<li>
The <b>Ptc File</b> parameter changes. </li>
<li>
The <b>Load %</b> parameter changes. </li>
<li>
The bounding box input changes and the <b>Bound on Load</b> parameter is on. </li>
</ul>
<p>RmanPtcSop uses a probability-based method for loading a percentage of the cloud into memory. This has the advantage of always generating an even distribution of points throughout the cloud but does require the entire cloud to be read from disk each time. That means that regardless of the <b>Load %</b> parameter the load time is constant for a particular ptc file.</p>
<div align="center">
<img src="load100percent.jpg" alt="load100percent.jpg"/>
<p><strong>100% Loaded</strong></p></div>
 <div align="center">
<img src="load5percent.jpg" alt="load5percent.jpg"/>
<p><strong>5% Loaded</strong></p></div>
<h2><a class="anchor" id="information">
Point Cloud Information</a></h2>
<p>A variety of information is available about the point cloud via the node's MMB information area. In addition to the normal Houdini geometry information you can see the total number of points in the cloud, how many are loaded into memory and the channels stored in the cloud.</p>
<div align="center">
<img src="ptc_info.jpg" alt="ptc_info.jpg"/>
</div>
<h2><a class="anchor" id="display">
Display Options</a></h2>
<p>RmanPtcSop has separate controls for the points loaded into memory and those dislayed in the viewport. This allows for fast control of the <b>Display / Output %</b> parameter. This parameter is based on a percentage of those loaded into memory, so if <b>Load %</b> and <b>Display / Output %</b> are both set to <b>10</b> then 10% of the point cloud will be loaded into memory and 10% of those will be displayed (i.e. 1% of the total points). The display percentage is also probability-based which means you get an even distribution of points throughout the cloud.</p>
<p>The OpenGL display preview will colour the points based on the selected <b>Display Channel</b> parameter. By default the points are drawn as 1-pixel points but you can change their size by using the <b>Point/Disk Size</b> parameter. You can also display the points as normal-aligned disks by turning on the <b>Display Disks</b> parameter. Disk size is also controlled by the <b>Point/Disk Size</b> parameter but is also affected by the radius attribute of the point.</p>
<div align="center">
<img src="point_size.jpg" alt="point_size.jpg"/>
<p><strong>Points</strong></p></div>
 <div align="center">
<img src="disk_preview.jpg" alt="disk_preview.jpg"/>
<p><strong>Disks</strong></p></div>
<h2><a class="anchor" id="output">
Display &amp; Geometry Output</a></h2>
<p>In addition to the OpenGL preview, any display points are output from the node as native Houdini point geometry. The node outputs position (P), normal (N) and radius for each point as well as the value of the selected display channel. You can output all channel information for each point by turning off the <b>Output Display Channel Only</b> parameter.</p>
<div align="center">
<img src="ptc_spreadsheet.jpg" alt="ptc_spreadsheet.jpg"/>
</div>
<h2><a class="anchor" id="bounds">
Bounding Point Clouds</a></h2>
<p>RmanPtcSop has a reference input for specifying an axis-aligned bounding box for the point cloud. By default this culls the display/output points allowing you to quickly isolate a particular area of the cloud. By turning on the <b>Bound On Load</b> parameter the bounding box instead culls the points before they are loaded into memory. This can dramatically improve performance for spatially-large point clouds but if the bounding box input changes then the entire point cloud will be reloaded.</p>
<div align="center">
<img src="bbox_input.jpg" alt="bbox_input.jpg"/>
</div>
<h2><a class="anchor" id="tips">
Hints &amp; Tips</a></h2>
<ul>
<li>
To apply transformation to the OpenGL preview use an <b>Object</b> level transform. Using a Transform node in the Geometry context (i.e. a transformSop) will move the output point geometry but will cancel the preview rendering. </li>
<li>
If you know a point cloud is very large then set the <b>Load %</b> parameter before specifying the filename. </li>
<li>
Disk preview is much more expensive than using points. Use with caution on very large clouds. </li>
</ul>
<h2><a class="anchor" id="authors">
Authors</a></h2>
<ul>
<li>
Dan Bethell (danbethell at gmail dot com)</li>
</ul>
<h2><a class="anchor" id="thanks">
Thanks</a></h2>
<ul>
<li>
Philippe Leprince and Michael Jones from <a href="http://dneg.com">Double Negative Visual Effects</a> for the <a href="http://dneg.github.com/dnPtcViewerNode">dnPtcViewerNode</a> project.</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Mon Feb 1 11:57:25 2010 for RmanPtcSop by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
